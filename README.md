# kp-abe

1. 我的wsl环境带不带gmp，需要手动安装：
```
   sudo apt install libgmp3-dev
   g++ test_gmp.cpp -o test_gmp -lgmp
   
   PS：自制automake方法：https://blog.csdn.net/u011857683/article/details/82026809
```

2. 虽然没有libclt13.so库文件，但貌似可以直接下载clt源文件的方式去调用，有时间可以试试。
```
   # To add and clone a new submodule
   $ git submodule add https://github.com/5GenCrypto/clt13.git
   $ git clone https://github.com/5GenCrypto/clt13.git
   $ git submodule init
   $ git submodule update
```
```
   sudo apt install cmake
   sudo apt install libflint-dev
   dos2unix build.sh
   ./build.sh
   make
   sudo make install
   sudo cp build/include/* /usr/local/include/
   sudo cp build/lib/* /usr/local/lib/
```

3. 接下来都准备好后，就是要调通程序，能跑起来就行
```
   ./configure
   make
   LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib/
   export LD_LIBRARY_PATH
   ./Encryption
```
```
$ ./Encryption
publicKey init****************************************
  λ: 10
  κ: 3
  α: 10
  β: 10
  η: 91
  ν: 16
  ρ: 10
  ρ_f: 60
  n: 3
  nzs: 3
  ncores: 4
  Flags: 
  Generating g_i's:
10      100% [||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||] 3/3 [0.00s]
  Generating p_i's:
91      100% [||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||] 3/3 [0.00s]
  Computing x0:
        100% [||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||] 2/2 [0.00s]
  Generating CRT coefficients:
        100% [||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||] 3/3 [0.00s]
  Generating z_i's:
        100% [||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||] 3/3 [0.00s]
  Generating pzt:
        100% [||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||] 6/6 [0.00s]
The public gk^a=0 | -917558414156544557678308281595575672877781211460874804794780373899611110238926814
The public h0=1444979559532473405318840798260918340918530278822138322578850329468696720162672898
The public h1=-1554358516005465068580300505934517549696500479319044255619669004581055428200491293
The public h2=-306120012335621880901173097881960189693038326369838032072731336085124275716993749
The public h3=191646101230593464639042143397860899506684115761984797906700226065135129088067880
The public h4=-721067932659341905973239743852546050979430899663857675532311352039905742498291336
setup time is 0
*********setUp() Complete!!!***************************************************
please input M:122
Cm=1993825370829749399669853450137566745294001152613586233844279272955929600838115754
gs=853775197482245848371584208774385484251448053978042803327234211043565285898765062
c[0]=1212585763268596652840420625480239906606646205002554411006890416927362489080951216
c[1]=1671967832507932354841366229767844798558294215180396275267616531635223070078513453
c[2]=0
c[3]=0
c[4]=0
*********Encrypt() Complete********************************************
skUnion[0]=639935961944570970603532825062450832600328630895392368554445672265474589561491080
skUnion[1]=781136147246833403634396563968226091376421197650893958585705826260269213323269844
skUnion[2]=1008398988920547961299163414421226780002684093663011349688756934271425285483662698
skUnion[3]=2398537183987386994993660408322086324081442564327082049983666299201104624758844288
skUnion[4]=2179548331402181792887499167851414575087886308320608940186830274769069902255454034
skUnion[5]=1017185962988701146509703676068012299344660605540369267774833698739750384863456077
skUnion[6]=-571235944908120601828699075900738991954706854668953231362172103997752211908789876
*********KeyGen() Complete********************************************
0 | 1856140904571711867936228581365641563185115603616210268379434926104706210765031638
The Message is 122
```
```
应该与当前的设置有关，当前只有3个节点，top_level为3，所以3位数的都可还原
```
